{"version":3,"file":"page-3.js","sources":["../src/page-3.js"],"sourcesContent":["import { message } from \"./js/iziToast\"\n\n const btn = document.querySelectorAll('.form')\n\nconst body = document.body;\nconst btnLog = document.querySelector(\".btn-log\");\nconst formBox = document.querySelector('.form-box')\nconst btnReg = document.querySelector('.btn-reg');\n\nconst arr = JSON.parse(localStorage.getItem(\"save\")) || [];\nlet counter = arr.length;\n\n\nbtnReg.addEventListener(\"click\", () =>{\n    formBox.classList.add('active');\n    body.classList.add('active')\n})\n\nbtnLog.addEventListener(\"click\", () =>{\n    formBox.classList.remove('active');\n    body.classList.remove('active')\n})\n\nbtn.forEach(findForm => {\n    findForm.addEventListener(\"submit\", e =>{\n        e.preventDefault();\n                const form = e.currentTarget;\n                const input = form.querySelectorAll(\"input\");\n                const formValue = {};\n\n                    let password = \"\";\n                    let password2 = \"\";\n                    let userEmail =\"\";\n\n                input.forEach(x =>{\n                    if(x.name === \"password\"){\n                        password = x.value\n                    }else if(x.name === \"password2\"){\n                        password2 = x.value;\n                    }else{\n                        formValue[x.name] = x.value;\n                    }\n                    if(x.name !== \"password2\" && x.name !== \"password\"){\n                        formValue[x.name] = x.value\n                    }\n                    \n                })\n        if(form.classList.contains(\"form-login\")){\n            \n            input.forEach(x => {\n                if(x.name === \"email\"){\n                    userEmail = x.value;\n                }else if(x.name === \"password\"){\n                    password = x.value;\n                }\n            })\n            const user = arr.find(y => y.email === userEmail && y.password === password);\n           if(user){\n            message(\"success\", \"Login\")\n            user.history = user.history || [];\n            user.history.push({action: \"login\", date: new Date().toISOString})\n            user.inLogin = \"Залогінився\"\n            localStorage.setItem('save', JSON.stringify(arr));\n            form.reset();\n           }else{\n            message(\"error\", \"Невірний логін або пароль\")\n            return\n           }\n            }else if(form.classList.contains(\"form-register\")){\n           if (password !== password2){\n            message(\"error\", \"Поролі не схожі\")\n            return\n           }\n            \n\n            counter += 1;\n            formValue.inLogin = \"Ще не увійшов\"\n            formValue.id = counter;\n            formValue.password = password;\n            arr.push(formValue)\n            localStorage.setItem('save', JSON.stringify(arr));\n            form.reset();\n\n            message('success', \"REGISTRATION\")\n            console.log(formValue)\n        }\n    })\n })\n//  console.log(localStorage.getItem(\"save\"))\n\n"],"names":["btn","body","btnLog","formBox","btnReg","arr","counter","findForm","e","form","input","formValue","password","password2","userEmail","x","user","y","message"],"mappings":"sFAEC,MAAMA,EAAM,SAAS,iBAAiB,OAAO,EAExCC,EAAO,SAAS,KAChBC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAS,SAAS,cAAc,UAAU,EAE1CC,EAAM,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,GAAK,GACxD,IAAIC,EAAUD,EAAI,OAGlBD,EAAO,iBAAiB,QAAS,IAAK,CAClCD,EAAQ,UAAU,IAAI,QAAQ,EAC9BF,EAAK,UAAU,IAAI,QAAQ,CAC/B,CAAC,EAEDC,EAAO,iBAAiB,QAAS,IAAK,CAClCC,EAAQ,UAAU,OAAO,QAAQ,EACjCF,EAAK,UAAU,OAAO,QAAQ,CAClC,CAAC,EAEDD,EAAI,QAAQO,GAAY,CACpBA,EAAS,iBAAiB,SAAUC,GAAI,CACpCA,EAAE,eAAc,EACR,MAAMC,EAAOD,EAAE,cACTE,EAAQD,EAAK,iBAAiB,OAAO,EACrCE,EAAY,CAAA,EAEd,IAAIC,EAAW,GACXC,EAAY,GACZC,EAAW,GAe3B,GAbQJ,EAAM,QAAQK,GAAI,CACXA,EAAE,OAAS,WACVH,EAAWG,EAAE,MACRA,EAAE,OAAS,YAChBF,EAAYE,EAAE,MAEdJ,EAAUI,EAAE,IAAI,EAAIA,EAAE,MAEvBA,EAAE,OAAS,aAAeA,EAAE,OAAS,aACpCJ,EAAUI,EAAE,IAAI,EAAIA,EAAE,MAG9C,CAAiB,EACNN,EAAK,UAAU,SAAS,YAAY,EAAE,CAErCC,EAAM,QAAQK,GAAK,CACZA,EAAE,OAAS,QACVD,EAAYC,EAAE,MACTA,EAAE,OAAS,aAChBH,EAAWG,EAAE,MAEjC,CAAa,EACD,MAAMC,EAAOX,EAAI,KAAKY,GAAKA,EAAE,QAAUH,GAAaG,EAAE,WAAaL,CAAQ,EAC5E,GAAGI,EACFE,EAAQ,UAAW,OAAO,EAC1BF,EAAK,QAAUA,EAAK,SAAW,CAAA,EAC/BA,EAAK,QAAQ,KAAK,CAAC,OAAQ,QAAS,KAAM,IAAI,OAAO,WAAW,CAAC,EACjEA,EAAK,QAAU,cACf,aAAa,QAAQ,OAAQ,KAAK,UAAUX,CAAG,CAAC,EAChDI,EAAK,MAAK,MACN,CACJS,EAAQ,QAAS,2BAA2B,EAC5C,MACA,CACC,SAAQT,EAAK,UAAU,SAAS,eAAe,EAAE,CACnD,GAAIG,IAAaC,EAAU,CAC1BK,EAAQ,QAAS,iBAAiB,EAClC,MACA,CAGAZ,GAAW,EACXK,EAAU,QAAU,gBACpBA,EAAU,GAAKL,EACfK,EAAU,SAAWC,EACrBP,EAAI,KAAKM,CAAS,EAClB,aAAa,QAAQ,OAAQ,KAAK,UAAUN,CAAG,CAAC,EAChDI,EAAK,MAAK,EAEVS,EAAQ,UAAW,cAAc,EACjC,QAAQ,IAAIP,CAAS,CACxB,CACT,CAAK,CACL,CAAE"}